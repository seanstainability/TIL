# 자바스크립트는 어떻게 작동하는가.

## 자바스크립트 엔진

- 구글의 V8 엔진이 대표적
- Chrome, Node에서 사용
- 엔진은 크게 Memory Heap과 Call Stack으로 구성
  - Memory Heap에서 메모리 할당이 이루어짐
  - 코드가 실행되면서 Call Stack에 스택 프레임(작업)이 쌓임

### Call Stack

- 자바스크립트는 single-threaded 언어
  - Call Stack이 하나
  - 일꾼이 하나
- 에러 발생 시 Stack Trace를 보여줌
  - Overflow 발생 시 스택을 날리기도 함
  ```javascript
  function foo() {
    foo();
  }
  foo();
  ```
- Call Stack 내에 수행시간이 긴 함수가 있으면?
  - Call Stack이 하나기 때문에 다른 작업을 할 수 없는 Blocking 상태
  - 렌더링 작업이 막혀 부드러운 UI 표현에 문제
  - 긴 시간동안 응답이 없으면 브라우저에서 에러를 일으키고 사용자에게 해당 페이지를 닫을지 물어보기도 함
  - 해결책으로 Asynchronous Callback

## 런타임

![런타임 이미지](https://miro.medium.com/max/4800/1*i9nTlOSPH3q-sCd5-WHg-g.png)

- 자바스크립트 엔진
  - 자바스크립트 엔진은 고립되어 수행되는 것이 아니라 호스팅 환경 내에서 수행
- 브라우저가 제공하는 [Web API](https://developer.mozilla.org/ko/docs/Web/API)
- Callback Queue
- Event Loop
  - Call Stack과 Callback Queue 감시
  - Call Stack이 비면 Callback Queue의 콜백을 가져다가 밀어넣음, 이러한 행위를 Tick이라고 부름
